var Beacon,LocalStorage,NewsFeed,NewsTopPCModel,NewsTopPCRouter,NewsTopPCView,PageTopButton,TopicsView,Yjdcookie,lsENV,_ref,_ref1,_ref10,_ref11,_ref12,_ref13,_ref14,_ref15,_ref16,_ref17,_ref18,_ref19,_ref2,_ref20,_ref21,_ref22,_ref23,_ref24,_ref25,_ref26,_ref27,_ref28,_ref29,_ref3,_ref30,_ref31,_ref32,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};(function(){var isSupportTouchEvent,mousedown,mousemove,mouseout,mouseover,mouseup,userAgent;mousedown=null;mouseup=null;mousemove=null;mouseover=null;mouseout=null;isSupportTouchEvent=null;userAgent=window.navigator.userAgent;if(typeof window.ontouchstart!=="undefined"&&userAgent.search(/Windows/)===-1){mousedown="touchstart";mouseup="touchend";mousemove="touchmove";mouseover="touchstart";mouseout="touchend";isSupportTouchEvent=true}else{mousedown="mousedown";mouseup="mouseup";mousemove="mousemove";mouseover="mouseover";mouseout="mouseout";isSupportTouchEvent=false}jQuery.event.special.keepWatch={timeout:200,setup:function(){var current,jthis,self,watch;jthis=$(this);self=this;current=jthis.val();watch=function(){if(!self){return}if(current!==jthis.val()){current=jthis.val();jthis.trigger("keepWatch");setTimeout(watch,jQuery.event.special.keepWatch.timeout)}return this};setTimeout(watch,jQuery.event.special.keepWatch.timeout);return this}};jQuery.event.special.fastclick={distance:10,timeout:480,mousedown:mousedown,mouseup:mouseup,mousemove:mousemove,mouseover:mouseover,mouseout:mouseout,setup:function(){var jthis,time;jthis=jQuery(this);time=0;jthis.on("click",function(event){return event.preventDefault()});return jthis.on(jQuery.event.special.fastclick.mousedown,function(event){var isFastclick,moveHandler,originTarget,startX,startY;time=+new Date;if(event.ctrlKey){return}if(__indexOf.call(event,"which")>=0&&event.which===3){return}startX=0;startY=0;originTarget=null;isFastclick=true;moveHandler=function(event){var x,y;if(isSupportTouchEvent){x=event.originalEvent.targetTouches[0].pageX;y=event.originalEvent.targetTouches[0].pageY}else{x=event.pageX;y=event.pageY}if(Math.abs(startX-x)>jQuery.event.special.fastclick.distance||Math.abs(startY-y)>jQuery.event.special.fastclick.distance){isFastclick=false}return this};if(isSupportTouchEvent){originTarget=event.originalEvent.touches[0].target;startX=event.originalEvent.targetTouches[0].pageX;startY=event.originalEvent.targetTouches[0].pageY}else{originTarget=event.target;startX=event.pageX;startY=event.pageY}jthis.on(jQuery.event.special.fastclick.mousemove,moveHandler).one(jQuery.event.special.fastclick.mouseup,function(){jthis.off(jQuery.event.special.fastclick.mousemove,moveHandler);if(isFastclick&&+new Date-time<=jQuery.event.special.fastclick.timeout){jQuery(originTarget).trigger("fastclick")}return this});return this})}};jQuery.fn._hover=function(selector){if(typeof selector==="undefined"){selector=null}jQuery(this).on(jQuery.event.special.fastclick.mouseover,selector,function(){return jQuery(this).addClass("hover")}).on(jQuery.event.special.fastclick.mouseout,selector,function(){return jQuery(this).removeClass("hover")});return this};return this})();Beacon=function(url){var img;img=new Image;return img.src=url+"?"+(new Date).getTime()};LocalStorage={};LocalStorage.EnvModel=function(_super){__extends(EnvModel,_super);function EnvModel(){_ref=EnvModel.__super__.constructor.apply(this,arguments);return _ref}EnvModel.prototype.defaults=function(){return{enable:false}};EnvModel.prototype.initialize=function(){var e;try{if(typeof localStorage!=="undefined"&&localStorage instanceof Storage!==false){localStorage.setItem("YAHOO.JP.News.Top.LocalStorageCheck",1);localStorage.removeItem("YAHOO.JP.News.Top.LocalStorageCheck");this.set("enable",true)}}catch(_error){e=_error}return this};EnvModel.prototype.isSupport=function(){return this.get("enable")};return EnvModel}(Backbone.Model);lsENV=new LocalStorage.EnvModel;LocalStorage.UtilModel=function(_super){__extends(UtilModel,_super);function UtilModel(){_ref1=UtilModel.__super__.constructor.apply(this,arguments);return _ref1}UtilModel.prototype.defaults=function(){return{enable:false,prefix:"YAHOO.JP.News.Top.",version:null,key:""}};UtilModel.prototype.initialize=function(options){if(lsENV.isSupport()===false){return false}if(options.key==="undefined"||options.key==null||options.key===""){return false}if(options.version==="undefined"||options.version==null||options.version===""){return false}this.set("enable",true);if(options.prefix!=="undefined"&&options.prefix!=null&&options.prefix!==""){this.set("prefix",true)}this.set("key",this.get("prefix")+options.key);return true};UtilModel.prototype.getItem=function(){var item,rowVal;if(this.get("enable")===false){return false}rowVal=localStorage.getItem(this.get("key"));if(rowVal==null){return false}item=JSON.parse(rowVal);if(item.version==null||item.version!==this.get("version")){return false}return item.val};UtilModel.prototype.setItem=function(val){var item;if(this.get("enable")===false){return false}item={version:this.get("version"),val:val};localStorage.setItem(this.get("key"),JSON.stringify(item));return true};return UtilModel}(Backbone.Model);Yjdcookie={};Yjdcookie.ModuleView=function(_super){__extends(ModuleView,_super);function ModuleView(){_ref2=ModuleView.__super__.constructor.apply(this,arguments);return _ref2}ModuleView.prototype.events={fastclick:"setYjdcookie"};ModuleView.prototype.initialize=function(options){return this.path=options.path};ModuleView.prototype.setYjdcookie=function(){var _this=this;$.get(this.path,function(){return document.location.href=_this.$el.attr("href")});return false};return ModuleView}(Backbone.View);TopicsView={};TopicsView.ModuleModel=function(_super){__extends(ModuleModel,_super);function ModuleModel(){_ref3=ModuleModel.__super__.constructor.apply(this,arguments);return _ref3}ModuleModel.prototype.defaults=function(){return{selected:"top"}};ModuleModel.prototype.initialize=function(){var data;this.ls=new LocalStorage.UtilModel({key:"Topics",version:1});if(this.get("isBack")===true){data=this.ls.getItem();if(data!==false&&data.category!=="top"){this.set("selected",data.category)}}else{this.selectCategory("top")}return this};ModuleModel.prototype.selectCategory=function(category){this.set("selected",category);return this.ls.setItem({category:category})};return ModuleModel}(Backbone.Model);TopicsView.ModuleView=function(_super){__extends(ModuleView,_super);function ModuleView(){this.select=__bind(this.select,this);_ref4=ModuleView.__super__.constructor.apply(this,arguments);return _ref4}ModuleView.prototype.initialize=function(){var selected;this.$el=$(this.options.module);this.model=new TopicsView.ModuleModel({isBack:this.options.isBack});this.model.set("$selected",$("#top"));this.model.set("$contents",$(this.options.contents));this.model.set("$tab",$(this.options.tab));$(this.options.tab).on("fastclick","a",this.select);selected=this.model.get("selected");if(this.options.isBack===true&&selected!=="top"){this.selectUncurrentTab(selected)}return this};ModuleView.prototype.select=function(e){return this};ModuleView.prototype.selectUncurrentTab=function(category){var $contents,$current,$select,switchClass;$select=$("#"+category);if($select.length===0){return false}$current=this.model.get("$selected");switchClass="current";$contents=this.model.get("$contents");$current.toggleClass(switchClass);$contents.eq($current.parent().index()).toggleClass(switchClass);$select.toggleClass(switchClass);$contents.eq($select.parent().index()).toggleClass(switchClass);this.model.selectCategory(category);this.model.set("$selected",$select);return this};return ModuleView}(Backbone.View);TopicsView.PCModuleView=function(_super){__extends(PCModuleView,_super);function PCModuleView(){this.select=__bind(this.select,this);_ref5=PCModuleView.__super__.constructor.apply(this,arguments);return _ref5}PCModuleView.prototype.select=function(e){var current,select;select=e.currentTarget.id;current=this.model.get("selected");if(select===current){if(select!=="top"){location.href=e.currentTarget.attributes["data-ylt"].nodeValue}}else{Beacon(e.currentTarget.attributes["data-beacon"].nodeValue);this.selectUncurrentTab(select)}return this};return PCModuleView}(TopicsView.ModuleView);NewsFeed={};NewsFeed.ItemModel=function(_super){__extends(ItemModel,_super);function ItemModel(){_ref6=ItemModel.__super__.constructor.apply(this,arguments);return _ref6}ItemModel.prototype.defaults=function(){return{id:"",type:"",display:false}};ItemModel.prototype.showItem=function(){return this.set("display",true)};return ItemModel}(Backbone.Model);NewsFeed.ItemView=function(_super){__extends(ItemView,_super);function ItemView(){_ref7=ItemView.__super__.constructor.apply(this,arguments);return _ref7}ItemView.prototype.tagName="li";ItemView.prototype.attributes={style:"display: none;"};ItemView.prototype.initialize=function(){return this.listenTo(this.model,"change:display",this.showItem)};ItemView.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON()))};ItemView.prototype.showItem=function(){if(this.model.get("display")){return this.$el.show()}};return ItemView}(Backbone.View);NewsFeed.NewsArticleView=function(_super){__extends(NewsArticleView,_super);function NewsArticleView(){_ref8=NewsArticleView.__super__.constructor.apply(this,arguments);return _ref8}NewsArticleView.prototype.className="feedArticle";NewsArticleView.prototype.template=_.template($("#NewsFeedTmpl_Article").html());return NewsArticleView}(NewsFeed.ItemView);NewsFeed.BuzzArticleView=function(_super){__extends(BuzzArticleView,_super);function BuzzArticleView(){_ref9=BuzzArticleView.__super__.constructor.apply(this,arguments);return _ref9}BuzzArticleView.prototype.className="feedBuzzWord";BuzzArticleView.prototype.template=_.template($("#NewsFeedTmpl_BuzzArticle").html());return BuzzArticleView}(NewsFeed.ItemView);NewsFeed.StreamADView=function(_super){__extends(StreamADView,_super);function StreamADView(){_ref10=StreamADView.__super__.constructor.apply(this,arguments);return _ref10}StreamADView.prototype.className="feedAd";StreamADView.prototype.render=function(ad){var appender,_this=this;appender=function(dom){return _this.$el.append(dom)};ad.takeAds(appender);return this.$el};return StreamADView}(NewsFeed.ItemView);NewsFeed.ListCollection=function(_super){__extends(ListCollection,_super);function ListCollection(){_ref11=ListCollection.__super__.constructor.apply(this,arguments);return _ref11}ListCollection.prototype.model=NewsFeed.ItemModel;ListCollection.prototype.url="/NewsFeedAPI";ListCollection.prototype.getArticleList=function(params,timeout){if(timeout==null){timeout=5e3}return this.fetch({data:params,timeout:timeout,success:this.success,error:this.error,merge:true,remove:false})};ListCollection.prototype.parse=function(res){var item,_i,_len,_ref12;if(res.entry.Version===1){_ref12=res.entry.Result;for(_i=0,_len=_ref12.length;_i<_len;_i++){item=_ref12[_i];this.add(item)}this.add({id:"ad_"+$.now(),type:"ad"});if(res["openSearch:totalResults"]<=res["openSearch:startIndex"]+res["openSearch:itemsPerPage"]){this.trigger("outOfStock")}}return false};ListCollection.prototype.success=function(collection,res,options){if(res.entry.Version===1){res.entry.Beacon.load;return collection.trigger("requestSuccess",{beacon:res.entry.Beacon.load})}else{return collection.trigger("systemUpdate")}};ListCollection.prototype.error=function(collection,res,options){return collection.trigger("requestError")};return ListCollection}(Backbone.Collection);NewsFeed.ListModel=function(_super){__extends(ListModel,_super);function ListModel(){this.requestStop=__bind(this.requestStop,this);_ref12=ListModel.__super__.constructor.apply(this,arguments);return _ref12}ListModel.prototype.defaults=function(){return{pos:1,results:10,crumb:"",errorCount:0,loadBeacon:"",requestStop:false}};ListModel.prototype.requestStop=function(){return this.set("requestStop",true)};return ListModel}(Backbone.Model);NewsFeed.ListView=function(_super){__extends(ListView,_super);function ListView(){_ref13=ListView.__super__.constructor.apply(this,arguments);return _ref13}ListView.prototype.el=$("#feedList");ListView.prototype.initialize=function(options){this.ad=new YjaxcStream;this.model.set("crumb",options.crumb);this.listenTo(this.collection,"add",this.render);this.listenTo(this.collection,"requestSuccess",this.requestSuccess);this.listenTo(this.collection,"requestError",this.requestError);return this.listenTo(this.collection,"outOfStock",this.model.requestStop)};ListView.prototype.showAllItems=function(){var item,targetItems,ylt,_i,_len,_results;ylt=this.model.get("loadBeacon");if(ylt!==null&&ylt!==""){Beacon(ylt)}targetItems=this.collection.where({display:false});_results=[];for(_i=0,_len=targetItems.length;_i<_len;_i++){item=targetItems[_i];_results.push(item.showItem())}return _results};ListView.prototype.getListData=function(){var crumb,device,results,start;if(this.model.get("requestStop")===false){crumb=this.model.get("crumb");if(crumb===""){this.crumbError();return false}results=this.model.get("results");start=this.model.get("pos");device=this.model.get("device");return this.collection.getArticleList({results:results,start:start,_crumb:crumb,device:device})}};ListView.prototype.requestSuccess=function(options){this.model.set("loadBeacon",options.beacon);this.model.set("pos",this.model.get("pos")+this.model.get("results"));return this.model.get("errorCount",0)};ListView.prototype.requestError=function(){var errCnt;errCnt=this.model.get("errorCount");if(errCnt===0){this.model.set("errorCount",++errCnt);return this.getListData()}else{this.trigger("moduleError");if(this.collection.length===0){return this.renderRequestErrorModule()}}};ListView.prototype.crumbError=function(){this.renderCrumbErrorModule();return this.trigger("moduleError")};ListView.prototype.renderRequestErrorModule=function(){return $("#feedRequestError").show()};ListView.prototype.renderCrumbErrorModule=function(){return $("#feedCrumbError").show()};return ListView}(Backbone.View);NewsFeed.FooterModel=function(_super){__extends(FooterModel,_super);function FooterModel(){_ref14=FooterModel.__super__.constructor.apply(this,arguments);return _ref14}FooterModel.prototype.defaults=function(){return{state:""}};FooterModel.prototype.changeMore=function(){if(this.get("state")!=="end"){return this.set("state","more")}};FooterModel.prototype.changeLoading=function(){if(this.get("state")!=="end"){return this.set("state","loading")}};FooterModel.prototype.changeEnd=function(){return this.set("state","end")};FooterModel.prototype.changeTimeout=function(){return this.set("state","timeout")};return FooterModel}(Backbone.Model);NewsFeed.FooterView=function(_super){__extends(FooterView,_super);function FooterView(){this.clickMore=__bind(this.clickMore,this);_ref15=FooterView.__super__.constructor.apply(this,arguments);return _ref15}FooterView.prototype.initialize=function(){this.model.changeLoading();return this};FooterView.prototype.changeModule=function(){var state;state=this.model.get("state");if(state==="more"){return this.changeMore()}else if(state==="loading"){return this.changeLoading()}else if(state==="end"){return this.changeEnd()}else if(state==="timeout"){return this.changeReload()}};FooterView.prototype.clickMore=function(){this.model.changeLoading();return false};FooterView.prototype.changeMore=function(){this.$load.hide();this.$more.show();return this.$navi.show()};FooterView.prototype.changeLoading=function(){this.$more.hide();this.$navi.hide();return this.$load.show()};FooterView.prototype.changeEnd=function(){this.$load.hide();return this.$navi.show()};FooterView.prototype.changeReload=function(){this.$load.hide();this.$more.hide();this.$reload.show();return this.$navi.show()};return FooterView}(Backbone.View);NewsFeed.ModuleModel=function(_super){__extends(ModuleModel,_super);function ModuleModel(){_ref16=ModuleModel.__super__.constructor.apply(this,arguments);return _ref16}ModuleModel.prototype.defaults=function(){return{count:0,autoLoadFlag:false,windowHeight:0,loadingIconTop:0,end:false}};ModuleModel.prototype.initialize=function(options){this.set("timeout",$.now()+options.expire);this.setWindowHeight();return this.setLoadingIconTop()};ModuleModel.prototype.setWindowHeight=function(){return this.set("windowHeight",window.innerHeight?window.innerHeight:$(window).height())};ModuleModel.prototype.setLoadingIconTop=function(){var loadingIcon;loadingIcon=$("#feedProcessing").offset();return this.set("loadingIconTop",loadingIcon.top)};ModuleModel.prototype.setEndFlag=function(){return this.model.set("end",true)};return ModuleModel}(Backbone.Model);NewsFeed.ModuleView=function(_super){__extends(ModuleView,_super);function ModuleView(){_ref17=ModuleView.__super__.constructor.apply(this,arguments);return _ref17}ModuleView.prototype.initialize=function(){var _this=this;_.bindAll(this,"autoLoad");$(window).bind("resize",function(){_this.model.setWindowHeight();return _this.model.setLoadingIconTop()});$(window).bind("scroll",this.autoLoad);this.autoLoadTimer=setInterval(this.autoLoad,200);this.listenTo(this.views.footer.model,"change",this.clickMore);this.listenTo(this.views.list.collection,"sync",this.afterProcess);this.listenTo(this.views.list.collection,"outOfStock",this.model.setEndFlag);this.listenTo(this.views.list.collection,"systemUpdate",this.timeout);this.listenTo(this.views.list,"moduleError",this.moduleError);this.views.list.getListData();return this};ModuleView.prototype.clickMore=function(data){var _this=this;if(this.views.footer.model.get("state")==="loading"){this.model.set("autoLoadFlag",false);return setTimeout(function(){_this.views.list.showAllItems();if(_this.model.get("end")===false){_this.model.setLoadingIconTop();return _this.views.list.getListData()}else{return _this.close()}},200)}};ModuleView.prototype.autoLoad=function(){var scrollTop;if(this.model.get("timeout")<$.now()){this.timeout();return false}scrollTop=$(window).scrollTop();if(this.model.get("loadingIconTop")<scrollTop+this.model.get("windowHeight")&&this.model.get("autoLoadFlag")){this.model.set("autoLoadFlag",false);this.views.list.showAllItems();if(this.model.get("end")===false){this.model.setLoadingIconTop();return this.views.list.getListData()}else{return this.close()}}};ModuleView.prototype.afterProcess=function(){var count;count=this.model.get("count");this.model.set("count",++count);if(count===1){this.views.list.showAllItems();this.model.setLoadingIconTop();this.views.list.getListData()}else if(count%4===0){this.model.set("autoLoadFlag",false);this.views.footer.model.changeMore()}else{this.model.set("autoLoadFlag",true)}return this};ModuleView.prototype.timeout=function(){this.model.set("end",true);clearInterval(this.autoLoadTimer);$(window).off("onscroll",this.autoLoad);return this.views.footer.changeReload()};ModuleView.prototype.close=function(){clearInterval(this.autoLoadTimer);$(window).off("scroll",this.autoLoad);if(this.views.list.collection.length===0){this.views.list.renderRequestErrorModule()}Beacon($("#feed").attr("data-beacon-end"));return this.views.footer.changeEnd()};ModuleView.prototype.moduleError=function(){this.model.set("end",true);clearInterval(this.autoLoadTimer);$(window).off("scroll",this.autoLoad);Beacon($("#feed").attr("data-beacon-end"));return this.views.footer.changeEnd()};return ModuleView}(Backbone.View);NewsFeed.PCNewsArticleView=function(_super){__extends(PCNewsArticleView,_super);function PCNewsArticleView(){_ref18=PCNewsArticleView.__super__.constructor.apply(this,arguments);return _ref18}PCNewsArticleView.prototype.render=function(){if(this.model.get("imageUrl")!=null){this.$el.addClass("hasImg")}if(this.model.get("kidoku")!==false){this.$el.addClass("visited")}return PCNewsArticleView.__super__.render.call(this)};return PCNewsArticleView}(NewsFeed.NewsArticleView);NewsFeed.PCBuzzArticleView=function(_super){__extends(PCBuzzArticleView,_super);function PCBuzzArticleView(){_ref19=PCBuzzArticleView.__super__.constructor.apply(this,arguments);return _ref19}PCBuzzArticleView.prototype.render=function(){if(this.model.get("imageUrl")!=null){this.$el.addClass("hasImg")}if(this.model.get("kidoku")!==false){this.$el.addClass("visited")}return PCBuzzArticleView.__super__.render.call(this)};return PCBuzzArticleView}(NewsFeed.BuzzArticleView);NewsFeed.PCStreamADView=function(_super){__extends(PCStreamADView,_super);function PCStreamADView(){_ref20=PCStreamADView.__super__.constructor.apply(this,arguments);return _ref20}return PCStreamADView}(NewsFeed.StreamADView);NewsFeed.PCListCollection=function(_super){__extends(PCListCollection,_super);function PCListCollection(){_ref21=PCListCollection.__super__.constructor.apply(this,arguments);return _ref21}return PCListCollection}(NewsFeed.ListCollection);NewsFeed.PCListModel=function(_super){__extends(PCListModel,_super);function PCListModel(){_ref22=PCListModel.__super__.constructor.apply(this,arguments);return _ref22}return PCListModel}(NewsFeed.ListModel);NewsFeed.PCListView=function(_super){__extends(PCListView,_super);function PCListView(){_ref23=PCListView.__super__.constructor.apply(this,arguments);return _ref23}PCListView.prototype.initialize=function(options){this.model=new NewsFeed.PCListModel;this.collection=new NewsFeed.PCListCollection;this.model.set("results",15);this.model.set("device","pc");return PCListView.__super__.initialize.call(this,options)};PCListView.prototype.render=function(data){var $ad,type,view;type=data.get("type");if(type==="article"){view=new NewsFeed.PCNewsArticleView({model:data});return this.$el.append(view.render())}else if(type==="buzzArticle"){view=new NewsFeed.PCBuzzArticleView({model:data});return this.$el.append(view.render())}else if(type==="ad"){if(this.ad.hasMoreAds){view=new NewsFeed.PCStreamADView({model:data});$ad=view.render(this.ad);if($ad[0].firstChild!=null){return this.$el.append($ad)}}}};return PCListView}(NewsFeed.ListView);NewsFeed.PCFooterModel=function(_super){__extends(PCFooterModel,_super);function PCFooterModel(){_ref24=PCFooterModel.__super__.constructor.apply(this,arguments);return _ref24}return PCFooterModel}(NewsFeed.FooterModel);NewsFeed.PCFooterView=function(_super){__extends(PCFooterView,_super);function PCFooterView(){_ref25=PCFooterView.__super__.constructor.apply(this,arguments);return _ref25}PCFooterView.prototype.el=$("#feed");PCFooterView.prototype.initialize=function(){this.model=new NewsFeed.PCFooterModel;this.listenTo(this.model,"change",this.changeModule);$("#feedMoreBtn").on("click",this.clickMore);this.$more=$("#feedMore");this.$load=$("#feedProcessing");this.$reload=$("#feedReload");this.$navi=$("#feedGenreNavi");return PCFooterView.__super__.initialize.call(this)};return PCFooterView}(NewsFeed.FooterView);NewsFeed.PCModuleModel=function(_super){__extends(PCModuleModel,_super);function PCModuleModel(){_ref26=PCModuleModel.__super__.constructor.apply(this,arguments);return _ref26}return PCModuleModel}(NewsFeed.ModuleModel);NewsFeed.PCModuleView=function(_super){__extends(PCModuleView,_super);function PCModuleView(){_ref27=PCModuleView.__super__.constructor.apply(this,arguments);return _ref27}PCModuleView.prototype.views={};PCModuleView.prototype.initialize=function(options){this.views.footer=new NewsFeed.PCFooterView;this.views.list=new NewsFeed.PCListView(options.list);this.model=new NewsFeed.PCModuleModel({expire:options.expire});PCModuleView.__super__.initialize.call(this);return this};return PCModuleView}(NewsFeed.ModuleView);PageTopButton={};PageTopButton.ModuleModel=function(_super){__extends(ModuleModel,_super);function ModuleModel(){_ref28=ModuleModel.__super__.constructor.apply(this,arguments);return _ref28}ModuleModel.prototype.defaults=function(){return{beacon:""}};return ModuleModel}(Backbone.Model);PageTopButton.ModuleView=function(_super){__extends(ModuleView,_super);function ModuleView(){this.select=__bind(this.select,this);_ref29=ModuleView.__super__.constructor.apply(this,arguments);return _ref29}ModuleView.prototype.initialize=function(){this.$el=$(this.options.el);this.$el.on("click",this.select);if(this.model==null){this.model=new PageTopButton.ModuleModel}return this.model.set("beacon",this.$el.attr("data-beacon"))};ModuleView.prototype.select=function(){Beacon(this.model.get("beacon"));$("html,body").animate({scrollTop:0},"normal","swing");return false};return ModuleView}(Backbone.View);NewsTopPCRouter=function(_super){__extends(NewsTopPCRouter,_super);function NewsTopPCRouter(){_ref30=NewsTopPCRouter.__super__.constructor.apply(this,arguments);return _ref30}NewsTopPCRouter.prototype.routes={"!/:category":"selectCategory"};NewsTopPCRouter.prototype.selectCategory=function(category){return this.trigger("selectCategory",category)};return NewsTopPCRouter}(Backbone.Router);NewsTopPCModel=function(_super){__extends(NewsTopPCModel,_super);function NewsTopPCModel(){_ref31=NewsTopPCModel.__super__.constructor.apply(this,arguments);return _ref31}NewsTopPCModel.prototype.defaults=function(){return{isBack:false,viewtime:0}};NewsTopPCModel.prototype.initialize=function(){var data,viewtime;this.ls=new LocalStorage.UtilModel({key:"Common",version:1});viewtime=this.get("viewtime");data=this.ls.getItem();if(data!==false&&data.lasttime===viewtime){this.set("isBack",true)}else{this.ls.setItem({lasttime:viewtime})}return this};return NewsTopPCModel}(Backbone.Model);NewsTopPCView=function(_super){__extends(NewsTopPCView,_super);function NewsTopPCView(){_ref32=NewsTopPCView.__super__.constructor.apply(this,arguments);return _ref32}NewsTopPCView.prototype.initialize=function(options){this.router=new NewsTopPCRouter;this.model=new NewsTopPCModel(options.common);this.views={Topics:new TopicsView.PCModuleView({module:"#editorsPick",tab:".epNav li",contents:".epContents",isBack:this.model.get("isBack")}),NewsFeed:new NewsFeed.PCModuleView(options.feed),PageTop:new PageTopButton.ModuleView({el:"#pageTopBtn"}),yjdcookie:new Yjdcookie.ModuleView({el:$("#changeDevice"),path:"/yjdset/smartphone"})};this.listenTo(this.router,"selectCategory",this.selectCategory);Backbone.history.start();YAHOO.JP.News.Top.FixedRightCol.init();return YAHOO.JP.News.globalNav.init()};NewsTopPCView.prototype.selectCategory=function(category){if(this.model.get("isBack")===false){return this.views.Topics.selectUncurrentTab(category)}};return NewsTopPCView}(Backbone.View);YAHOO.JP.News.Top.View=new NewsTopPCView(YAHOO.JP.News.Top.Params);