am.XGrid=Class.create(Class.compat(dhtmlXGridObject),{default_column_options:{id:'',label:'',width:'0px',type:'rotxt',align:'left',sort_type:'na',tooltip:true,resizable:true,selectable:true,class_name:'',hidden:false},default_even_row_class:'even_row',default_odd_row_class:'odd_row',default_hover_row_class:'hover_row',default_focus_row_class:'focus_row',initialize:function($super,param){$super(param.id);this.overrideInstanceMethods();this.setImagePath(amdata.url.image);this.createCustomCells(param.custom_cells);this.buildHeader(param.header);this.setOptions(param.options);this.setEventListeners(param.listeners);this.init();this.callEvent('onInit',[this]);},destroy:function(){this.clear();this.destructor();},createCustomCells:function(custom_cells){if(!custom_cells){return;}
custom_cells.each(function(options){am.XGrid.createCustomCell(options.type,options.setter,options.html);});},rebuildHeader:function(source){this.clearAll(true);this.buildHeader(source);this.init();this.callEvent('onInit',[this]);},buildHeader:function(source){var ids=[];var labels=[];var widths=[];var aligns=[];var types=[];var sort_types=[];var tooltips=[];var resizables=[];var selectables=[];var class_names=[];var hiddens=[];source.each(function(column,index){if((column.type==='ch')&&(column.selectable==null)){column.selectable=false;}
column=Object.extend(Object.clone(this.default_column_options),column);ids[ids.length]=column.id||index.toString();labels[labels.length]=column.label||index.toString();widths[widths.length]=column.width;aligns[aligns.length]=column.align;types[types.length]=column.type;sort_types[sort_types.length]=column.sort_type;tooltips[tooltips.length]=column.tooltip;resizables[resizables.length]=column.resizable;selectables[selectables.length]=column.selectable;class_names[class_names.length]=column.class_name;hiddens[hiddens.length]=column.hidden;},this);this.setColumnIds(ids.join(this.delim));this.setHeader(labels);this.setColumnWidths(widths);this.setColAlign(aligns.join(this.delim));this.setColTypes(types.join(this.delim));this.setColSorting(sort_types.join(this.delim));this.enableTooltips(tooltips.join(this.delim));this.enableResizing(resizables.join(this.delim));this.setColumnSelectability(selectables);this.setColumnClassNames(class_names);this.setColumnsVisibility(hiddens.join(this.delim));},setOptions:function(options){if(!options){return;}
if(options.AlterCss){this.enableAlterCss(this.default_even_row_class,this.default_odd_row_class);}
delete options.AlterCss;if(options.RowsHover){this.enableRowsHover(true,this.default_hover_row_class);}
delete options.RowsHover;if(options.RowHeight){this.setAwaitedRowHeight(options.RowHeight);}
delete options.RowHeight;if(options.HeightFix){this.setHeightFix(options.HeightFix);}
delete options.HeightFix;for(var option in options){if(typeof(this['enable'+option])==='function'){this['enable'+option](options[option])}}},setEventListeners:function(listeners){if(!listeners){return;}
for(var name in listeners){if(typeof(listeners[name])==='function'){this.attachEvent('on'+name,listeners[name]);}}},getScrollTop:function(){return this.objBox.scrollTop;},setScrollTop:function(top){var box=this.objBox;if(top){if(box.scrollHeight>top){if(box.scrollHeight>(top+box.clientHeight)){box.scrollTop=top;}else{box.scrollTop=(box.scrollHeight-box.clientHeight);}}}},setColumnWidths:function(widths){if(typeof(widths)==='string'){widths=widths.split(this.delim);}
var all_percent=true;var all_pixel=true;var remain=100;var requids=[];var fixed=[]
for(var i=0;i<widths.length;i++){var width=widths[i];if(width==='*'){all_pixel=false;requids[requids.length]=i;width=0;fixed[fixed.length]=false;}else if(width.indexOf('%')!==-1){all_pixel=false;width=parseInt(width)||0;remain-=width;fixed[fixed.length]=false;}else{all_percent=false;width=parseInt(width)||0;fixed[fixed.length]=true;}
widths[i]=(width>0)?width:0;}
if(requids.length>0){var requid_width=(remain>0)?Math.floor(remain/requids.length):0;for(var i=0;i<requids.length;i++){widths[requids[i]]=requid_width;}}
this.initCellWidth=widths;if(all_percent){this.cellWidthType='%';}else if(all_pixel){this.cellWidthType='px';}else{this.cellWidthType='mix';this._column_fixed=fixed;}},setColumnSelectability:function(selectables){if(typeof(selectables)==='string'){selectables=selectables.split(this.delim);}
this._column_selectable=selectables.map(function(selectable){return!!selectable;});},setColumnClassNames:function(class_names){if(typeof(class_names)==='string'){class_names=class_names.split(this.delim);}
if(class_names.any()){this._column_class_names=class_names;}else{this._column_class_names=null;}},setHeightFix:function(fix){this._sizeFix=fix;},clear:function(){this.clearAll();this._focused_row_id=null;if(this._master_checkbox){this._master_checkbox.checked=false;}
if(this._auto_render_timer){clearTimeout(this._auto_render_timer);this._auto_render_timer=null;}},update:function(source,type){this.clear();if(type==null){if(Object.isXML(source)){type='xml';}else if(Object.isObject(source)){type='json';}else if(Object.isArray(source)){type='jsarray';}else{type=null;}}
if(this._auto_rendering){this.parse(source,this.autoRender.bind(this,0),type);}else{this.parse(source,type);}},enableSynchronizedChecking:function(fl){this._ch_sync=!!fl;if(this._ch_sync&&!this._ch_sync_id){this._ch_sync_id=this.attachEvent('onSelectStateChanged',function(afterIds,beforeIds){var chIndex=this.getCheckboxIndex();afterIds=(afterIds||'').split(this.delim);beforeIds=(beforeIds||'').split(this.delim);afterIds.each(function(id){if(id&&!beforeIds.include(id)){this.cells(id,chIndex).setValue('1');}},this);beforeIds.each(function(id){if(id&&!afterIds.include(id)){this.cells(id,chIndex).setValue('0');}},this);});}else if(!this._ch_sync&&this._ch_sync_id){this.detachEvent(this._ch_sync_id);delete(this._ch_sync_id);}},enableSelection:function(fl){this._disable_selection=!fl;},sort:function(column,order,type){var index=this.getColumnIndex(column);this.sortRows(index,type,order);this.setSortImgState(true,index,order)},getCheckboxIndex:function(){for(var i=0;i<this.cellType.length;i++){if(this.cellType[i]==='ch'){return i;}}
return-1;},getColumnIndex:function(id){if(typeof(id)==='number'){return id;}
for(var i=0;i<this.columnIds.length;i++){if(this.columnIds[i]===id){return i;}}
return-1;},getCellValue:function(id,index){return this.cells(id,this.getColumnIndex(index)).getValue();},setCellValue:function(id,index,value){this.cells(id,this.getColumnIndex(index)).setValue(value);},getValue:function(id,key){var index=this.getColumnIndex(key);if(index>=0){return this.getCellValue(id,index);}else{return this.getUserData(id,key);}},setValue:function(id,key,value){var index=this.getColumnIndex(key);if(index>=0){this.setCellValue(id,index,value);}else{this.setUserData(id,key,value);}},setCellAlign:function(id,index,align){this.cells(id,this.getColumnIndex(index)).setHorAlign(align);},getCheckedValues:function(key,chIndex){var index=this.getColumnIndex(key);if(typeof(chIndex)!=='number'){chIndex=this.getCheckboxIndex();}
if(chIndex<0){return[];}
var values=this.getCheckedRows(chIndex).map(function(id){if(index<0){return this.getUserData(id,key);}else{return this.getCellValue(id,index);}},this);return values;},getMasterCheckbox:function(){return $(this._master_checkbox);},clearCheck:function(index){if(typeof(index)!=='number'){index=this.getCheckboxIndex();}
if(index<0){return;}
if(this._master_checkbox){this._master_checkbox.checked=false;}
for(var key in this.rowsAr){var row=this.rowsAr[key];if(row&&row.idd){this.cells(row.idd,index).setValue('0');}}},getCheckState:function(id,index){if(typeof(index)!=='number'){index=this.getCheckboxIndex();}
if(index<0){return false;}
return this.cells(id,index).getValue()!=='0';},setCheckState:function(id,state,index){if(typeof(index)!=='number'){index=this.getCheckboxIndex();}
if(index<0){return;}
this.cells(id,index).setValue(state?'1':'0');},toggleCheckState:function(id,index){if(typeof(index)!=='number'){index=this.getCheckboxIndex();}
if(index<0){return false;}
var state=!(this.cells(id,index).getValue()!=='0');this.cells(id,index).setValue(state?'1':'0');return state;},setColType:function(index,type){this.cellType[index]=type;},hasClassName:function(id,cls){return $(this.getRowById(id)).hasClassName(cls);},addClassName:function(id,cls){return $(this.getRowById(id)).addClassName(cls);},removeClassName:function(id,cls){return $(this.getRowById(id)).removeClassName(cls);},showColumn:function(index){this.setColumnHidden(this.getColumnIndex(index),false);},hideColumn:function(index){this.setColumnHidden(this.getColumnIndex(index),true);},enableKeyNavigation:function(flag){if(flag){if(this._original_doKey){this.doKey=this._original_doKey;this._original_doKey=null;}}else{if(!this._original_doKey){this._original_doKey=this.doKey;this.doKey=Prototype.emptyFunction;}}},enableFocusing:function(flag){this._focusing=!!flag;},focus:function(id){if(!this._focusing){return;}
var row=this.getRowById(id);if(row){this.clearFocus();$(row).addClassName(this.default_focus_row_class);try{this.moveToVisible(row.cells[0]);}catch(e){}
this._focused_row_id=id;}},focusReRendering:function(){if(!this._focusing){return;}
var row=this.getRowById(this._focused_row_id);if(row&&(row=$(row))){if(row.clientHeight>0&&row.clientWidth>0){row.removeClassName(this.default_focus_row_class);row.addClassName(this.default_focus_row_class);}else{this.focusReRendering.bind(this).delay(0.1);}}},clearFocus:function(){if(!this._focusing){return;}
if(this._focused_row_id){var row=this.getRowById(this._focused_row_id);if(row){$(row).removeClassName(this.default_focus_row_class);}
this._focused_row_id=null;}},getFocusedRowId:function(){return parseInt(this._focused_row_id);},enableAutoRendering:function(fl,render_num,frequency){if(fl){this._auto_rendering=true;this._auto_render_num=render_num||2;this._auto_render_frequency=frequency||250;}else{this._auto_rendering=false;if(this._auto_render_timer){clearTimeout(this._auto_render_timer);this._auto_render_timer=null;}}},autoRender:function(start_index){if(this._auto_render_timer){clearTimeout(this._auto_render_timer);this._auto_render_timer=null;}
var count=this._auto_render_num;var max=this.rowsBuffer.length;for(var i=start_index;(i<max)&&(count>0);i++){if(!this.rowsCol[i]){var res=this._add_from_buffer(i);count--;}}
if(i<max){this._auto_render_timer=setTimeout(this.autoRender.bind(this,i),this._auto_render_frequency);}},forceSizes:function(){this.gridWidth=this.gridHeight=0;this.setSizes();},enableSelectStart:function(row_id,cell_index,fl){var cell=this.cells(row_id,cell_index).cell;if(fl){cell.onselectstart=function(e){(e||event).cancelBubble=true;return true;};}else{cell.onselectstart=null;}},overrideInstanceMethods:function(){Object.extend(this,{setSizes:function(fl){if(!this.hdr.rows[0]){return;}
if(!this.entBox.offsetWidth){if(this._sizeTime){window.clearTimeout(this._sizeTime);}
var self=this;this._sizeTime=window.setTimeout(function(){self.setSizes();},250);return;}
if((_isFF&&(this.entBox.style.height==='100%'))||this._fixLater){this.entBox.style.height=this.entBox.parentNode.clientHeight;this._fixLater=true;}
if(fl&&(this.gridWidth===this.entBox.offsetWidth)&&(this.gridHeight===this.entBox.offsetHeight)){return false;}else if(fl){this.gridWidth=this.entBox.offsetWidth;this.gridHeight=this.entBox.offsetHeight;}
if(!this.hdrBox.offsetHeight&&(this.hdrBox.offsetHeight>0)){this.entCnt.rows[0].cells[0].height=this.hdrBox.offsetHeight+'px';}
var gridWidth=this.entBox.offsetWidth-(this._gcCorr||0);var gridHeight=this.entBox.offsetHeight-(this._sizeFix||0);this.hdr.style.border='0px solid gray';var zheight=this.hdr.offsetHeight+(this._borderFix||0);var aRow=this.entCnt.rows[1].cells[0].childNodes[0];if(!this.noHeader){aRow.style.top=(zheight-this.hdrBox.offsetHeight)+'px';}
aRow.style.height=Math.max(((((gridHeight-zheight-1)<0)&&_isIE)?20:(gridHeight-zheight-1))-(this.ftr?this.ftr.offsetHeight:0)-(_isIE&&(document.compatMode==='BackCompat')&&(this._fake?(this._sizeFix||0)*2:0)),0)+'px';if(this.ftr&&(this.entBox.offsetHeight>this.ftr.offsetHeight)){this.entCnt.style.height=this.entBox.offsetHeight-this.ftr.offsetHeight+'px';}
if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=(this._scrFix||17);}
if(this.cellWidthPX.length===0){this.cellWidthPX=this.initCellWidth.clone();}
if(this.cellWidthPC.length===0){this.cellWidthPC=this.initCellWidth.clone();}
if(this.cellWidthType==='%'){for(var i=0;i<this._cCount;i++){this.cellWidthPX[i]=Math.floor(gridWidth*this.cellWidthPC[i]/100);}}else if(this.cellWidthType==='mix'){var remain_width=gridWidth;for(var i=0;i<this._cCount;i++){if(this._column_fixed[i]){remain_width-=this.cellWidthPX[i];}}
for(var i=0;i<this._cCount;i++){if(!this._column_fixed[i]){this.cellWidthPX[i]=Math.floor(remain_width*this.cellWidthPC[i]/100);}}}
this.chngCellWidth();var summ=_isOpera?-1:0;for(var i=0;i<this._cCount;i++){summ+=this.cellWidthPX[i];}
this.objBuf.style.width=summ+'px';if(this.ftr&&!this._realfake){this.ftr.style.width=summ+'px';}
this.objBuf.childNodes[0].style.width=summ+'px';this.doOnScroll(0,1);if(this._topMb){this._topMb.style.top=(zheight||0)+'px';this._topMb.style.width=(gridWidth+20)+'px';}
if(this._botMb){this._botMb.style.top=(gridHeight-3)+'px';this._botMb.style.width=(gridWidth+20)+'px';}
if(this._srdh){this.doOnScroll();}
if(this.sortImg.style.display!=='none'){this.setSortImgPos();}},getColWidth:function(ind){if(this.cellWidthType==='px'){return this.cellWidthPX[ind]+(_isFF?2:0);}else if(this.cellWidthType==='%'){return this.cellWidthPC[ind];}else if(this.cellWidthType==='mix'){if(this._column_fixed[ind]){return this.cellWidthPX[ind]+(_isFF?2:0);}else{return this.cellWidthPC[ind];}}},setColWidth:function(ind,value){if(this.cellWidthType==='px'){this.cellWidthPX[ind]=parseInt(value)-(_isFF?2:0);}else if(this.cellWidthType==='%'){this.cellWidthPC[ind]=parseInt(value);}else if(this.cellWidthType==='mix'){if(this._column_fixed[ind]){this.cellWidthPX[ind]=parseInt(value)-(_isFF?2:0);}else{this.cellWidthPC[ind]=parseInt(value);}}},_setColumnSizeR:function(ind,fcolW){if(fcolW>((this._drsclmW&&!this._notresize)?(this._drsclmW[ind]||10):10)){this.obj.rows[0].childNodes[ind].style.width=fcolW+'px';this.hdr.rows[0].childNodes[ind].style.width=fcolW+'px';if(this.ftr){this.ftr.rows[0].childNodes[ind].style.width=fcolW+'px';}
if(this.cellWidthType==='px'){this.cellWidthPX[ind]=fcolW;}else if(this.cellWidthType==='%'){var gridWidth=this.entBox.offsetWidth;if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=this._scrFix||17;}
if(gridWidth<=0){gridWidth=1;}
this.cellWidthPC[ind]=fcolW/gridWidth*100.0;}else if(this.cellWidthType==='mix'){if(this._column_fixed[ind]){this.cellWidthPX[ind]=fcolW;}else{var gridWidth=this.entBox.offsetWidth;if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=this._scrFix||17;}
for(var i=0;i<this._cCount;i++){if(this._column_fixed[i]){gridWidth-=this.cellWidthPX[i];}}
if(gridWidth<=0){gridWidth=1;}
this.cellWidthPC[ind]=fcolW/gridWidth*100.0;}}
if(this.sortImg.style.display!=='none'){this.setSortImgPos();}}},setSortImgPos:function(ind,mode,hRowInd,el){if(this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:ind]){return;}
if(!el){if(!ind){el=this.r_fldSorted;}else{el=this.hdr.rows[hRowInd||0].cells[ind];}}
if(el!=null){var pos=this.getPosition(el,this.hdrBox);var width=el.offsetWidth;this.sortImg.style.left=(pos[0]+width-18)+'px';this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=(pos[1]+5)+'px';if(!this.useImagesInHeader&&!mode){this.sortImg.style.display='inline';}
this.sortImg.style.left=this.sortImg.defLeft+'px';this.sortImg.style.zIndex=1;}},changeCursorState:function(ev){var el=ev.target||ev.srcElement;if(el.tagName!=='TD'){el=this.getFirstParentOfType(el,'TD');}
if((el.tagName==='TD')&&this._drsclmn&&!this._drsclmn[el._cellIndex]){return el.style.cursor='default';}
if((el.offsetWidth-(ev.offsetX||(parseInt(this.getPosition(el,this.hdrBox))-ev.layerX)*-1))<10){el.style.cursor='E-resize';}else{el.style.cursor='default';}
if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft;}},_doClick:function(ev){if(this._disable_selection){return;}
var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,'TD');if(!el){return;}
if(this.markedCells){var markMethod=0;if(ev.shiftKey||ev.metaKey){markMethod=1;}
if(ev.ctrlKey){markMethod=2;}
this.doMark(el,markMethod);return true;}
if(this._column_selectable&&!this._column_selectable[el._cellIndex]){return;}
var selMethod=0;if(this.selMultiRows!=false){if(ev.shiftKey&&(this.row!=null)){selMethod=1;}
if(ev.ctrlKey||ev.metaKey){selMethod=2;}}
this.doClick(el,true,selMethod);if(!is.ie&&document.activeElement){document.activeElement.blur();}}});Class.override(this,{doClick:function($super,el,fl,selMethod,show){if(this.onRowSelectTime){clearTimeout(this.onRowSelectTime);}
return $super(el,fl,selMethod,show);},getColWidth:function($super,index){return $super(this.getColumnIndex(index));},setColWidth:function($super,index,value){$super(this.getColumnIndex(index),value);}});},_unsetRowHover:function(e,c){var that=c?this:this.grid;if(that._lahRw&&(that._lahRw!==c)){that._lahRw.className=that._lahRw.className.replace(that._hvrCss,'').replace(/\s+/g,' ').strip();that._lahRw=null;}},_setRowHover:function(e){var c=this.grid.getFirstParentOfType(e?e.target:event.srcElement,'TD');if(c&&(c.parentNode!==this.grid._lahRw)){this.grid._unsetRowHover(0,c);c=c.parentNode;c.className+=' '+this.grid._hvrCss;this.grid._lahRw=c;}
this._honmousemove(e);},_process_json_row:function($super,r,data){if(this._ud_enabled&&data.userdata){for(var name in data.userdata){this.setUserData(r.idd,name,data.userdata[name]);}}
return $super(r,data);},_showHContext:function($super,mode,x,y){$super(mode,x,y);if(mode){this._hContext.style.top=(y+document.viewport.getScrollOffsets()[1])+'px';}},_in_header_master_checkbox:function(t,i,c){t.innerHTML=c[0]+'<input type="checkbox" />'+c[1];this._master_checkbox=t.firstChild;var self=this;this._master_checkbox.onclick=function(e){var j=i;if(self._c_order){var _m_order=[];for(var k=0;k<self._c_order.length;k++){_m_order[self._c_order[k]]=k;}
j=_m_order[i];}
var val=this.checked?1:0;self.forEachRow(function(id){var c=this.cells(id,j);if(c.isCheckbox()){c.setValue(val);}});(e||event).cancelBubble=true;};},getCheckedRows:function(col_ind){if(typeof(col_ind)!=='number'){col_ind=this.getCheckboxIndex();}
var rows=[];if(this._master_checkbox&&this._master_checkbox.checked){for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]){var id=this.rowsBuffer[i].idd;if(!this.rowsAr[id]||(this.cells(id,col_ind).getValue()!=='0')){rows[rows.length]=id;}}}}else{this.forEachRow(function(id){if(this.cells(id,col_ind).getValue()!=='0'){rows[rows.length]=id;}});}
return rows;},getAllRowIds:function(){var ids=[];for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]){ids[ids.length]=this.rowsBuffer[i].idd;}}
return ids;},setColspan:function($super,row_id,col_ind,colspan){if(typeof(colspan)!=='number'){colspan=this.getColumnsNum()-col_ind;}
$super(row_id,col_ind,colspan);},enableDragAndDrop:function($super,mode){$super(mode?true:'temporary_disabled');},rowToDragElement:function($super,gridRowId){var value=this.callEvent('onRowToDrag',[gridRowId]);return(value!==true)?value:$super(gridRowId);},_prepareRow:function($super,new_id){var row=$super(new_id);if(this._column_class_names){for(var i=0;i<row.childNodes.length;i++){row.childNodes[i].className=this._column_class_names[i]||'';}}
return row;},_postRowProcessing:function(r,donly){if(r._attrs['class']){r._css=r.className=r.className+' '+r._attrs['class'];}
if(r._attrs.locked){r._locked=true;}
if(r._attrs.bgColor){r.bgColor=r._attrs.bgColor;}
var cor=0;for(var i=0;i<r.childNodes.length;i++){var c=r.childNodes[i];var ii=c._cellIndex;var s=c._attrs.style||r._attrs.style;if(s){c.style.cssText+=';'+s;}
if(c._attrs['class']){c.className=c.className+' '+c._attrs['class'];}
s=c._attrs.align||this.cellAlign[ii];if(s){c.align=s;}
c.vAlign=c._attrs.valign||this.cellVAlign[ii];var color=c._attrs.bgColor||this.columnColor[ii];if(color){c.bgColor=color;}
if(c._attrs['colspan']&&!donly){this.setColspan(r.idd,i+cor,c._attrs['colspan']);cor+=c._attrs['colspan']-1;}
if(this._hrrar&&this._hrrar[ii]&&!donly){c.style.display='none';}}
this.callEvent('onRowCreated',[r.idd,r,null]);},_createDragNode:function(htmlObject,e){this.editStop();if(window.dhtmlDragAndDrop.dragNode){return null;}
if(!this.dADTempOff){return null;}
if(!this.callEvent("onBeforeDrag",[htmlObject.parentNode.idd])){return null;}
var el=this.getFirstParentOfType(_isIE?e.srcElement:e.target,'TD');if(el){this._dndExtra=el._cellIndex;}
htmlObject.parentObject={parentNode:htmlObject.parentNode,treeNod:this};var id=htmlObject.parentNode.idd;if(this.rowsAr[id]){this._dragged=[this.rowsAr[id]];this.rowsAr[id].treeNod=this;}else{this._dragged=[];}
var dragSpan=document.createElement('div');dragSpan.innerHTML=this.rowToDragElement(htmlObject.parentNode.idd);dragSpan.style.position='absolute';dragSpan.className='dragSpanDiv';return dragSpan;},enableAutoHeight:Prototype.F,enableAutoWidth:Prototype.F,isGrid:true,getXObject:function(){return this;}});am.XGrid.createCustomCell=function(type,setter,html){var klass=function(cell){if(cell){this.cell=cell;this.grid=this.cell.parentNode.grid;}
this.edit=Prototype.F;this.isDisabled=Prototype.T;this.getId=function(){return this.cell.parentNode.idd;};this.getIndex=function(){return this.cell._cellIndex;};};klass.prototype=new eXcell;if(html){klass.prototype.setValue=function(){this.setCValue(setter.apply(this,arguments));};}else{klass.prototype.setValue=function(){this.setCTxtValue(setter.apply(this,arguments));};klass.prototype.getValue=function(){if(this.cell._clearCell){return"";}
return(_isIE?this.cell.innerText:this.cell.textContent);};}
window['eXcell_'+type]=klass;};dhtmlXGridCellObject.prototype.getTitle=function(){if(this.cell._clearCell){return'';}
return _isIE?this.cell.innerText:this.cell.textContent;};eXcell_rotxt=function(cell){this.cell=cell;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true;};this.setValue=function(val){if(!val||(val.toString()._dhx_trim()==='')){this.cell._clearCell=true;val=' ';}
this.setCTxtValue(val);};this.getValue=function(){if(this.cell._clearCell){return'';}
return _isIE?this.cell.innerText:this.cell.textContent;}};eXcell_rotxt.prototype=new eXcell;eXcell_ch.prototype.setValue=eXcell_ch.prototype.setValue.wrap(function($super,val){if(this.cell.chstate==null){if(this.grid._master_checkbox&&this.grid._master_checkbox.checked){val='1';}}
$super(val);if(this.grid._ch_sync){var row=this.cell.parentNode;if(this.cell.chstate==='0'){if(row.className.indexOf('rowselected')!==-1){row.className=row.className.replace(/rowselected/g,'').replace(/\s+/g,' ').strip();for(var i=0;i<row.childNodes.length;i++){var cell=row.childNodes[i];if(cell.className.indexOf('cellselected')!==-1){cell.className=cell.className.replace(/cellselected/g,'').replace(/\s+/g,' ').strip();}}
this.grid.selectedRows._dhx_removeAt(this.grid.selectedRows._dhx_find(row));}}else{if(row.className.indexOf('rowselected')===-1){row.className+=' rowselected';this.grid.selectedRows[this.grid.selectedRows.length]=row;}}}});dhtmlXGridObject.prototype._key_events.k9_0_0=dhtmlXGridObject.prototype._key_events.k9_0_1=Prototype.F;dhtmlXGridObject.prototype._key_events.k32_0_0=Prototype.F;
